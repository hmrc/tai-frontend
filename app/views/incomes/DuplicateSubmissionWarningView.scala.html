@*
 * Copyright 2021 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.tai.forms.YesNoForm
@import includes.{cancelLink, ptaHeader}
@import uk.gov.hmrc.play.views.html.helpers.FormWithCSRF

@import uk.gov.hmrc.tai.viewModels.income.estimatedPay.update.DuplicateSubmissionEstimatedPay

@import uk.gov.hmrc.govukfrontend.views.html.components.GovukInput
@import uk.gov.hmrc.govukfrontend.views.html.components.GovukButton
@import uk.gov.hmrc.govukfrontend.views.html.components.GovukRadios
@import uk.gov.hmrc.govukfrontend.views.html.components.GovukErrorSummary


@import uk.gov.hmrc.govukfrontend.views.viewmodels.radios.RadioItem
@import uk.gov.hmrc.govukfrontend.views.Aliases.Radios
@import uk.gov.hmrc.govukfrontend.views.Aliases.Fieldset
@import uk.gov.hmrc.govukfrontend.views.Aliases.Text

@import uk.gov.hmrc.govukfrontend.views.Aliases.Button
@import uk.gov.hmrc.govukfrontend.views.viewmodels.errorsummary.ErrorSummary

@import uk.gov.hmrc.govukfrontend.views.html.components._
@import uk.gov.hmrc.govukfrontend.views.html.components.implicits._

@this(mainTemplate: MainTempleteNew, form: FormWithCSRF, govukRadios: GovukRadios, govukButton: GovukButton, govukInput: GovukInput, govukErrorSummary: GovukErrorSummary)

@(duplicateSubmissionWarningForm: Form[YesNoForm], viewModel: DuplicateSubmissionEstimatedPay, empId: Int)(implicit request: Request[_], user: controllers.auth.AuthedUser, messages: Messages, templateRenderer: uk.gov.hmrc.renderer.TemplateRenderer,  ec: scala.concurrent.ExecutionContext)


@header = @{
    ptaHeader(
        formForErrorSummary = Some(duplicateSubmissionWarningForm),
        displayBackLink = false,
        mainHeadingText = viewModel.heading,
        preHeadingText = messages("tai.incomes.warning.preHeading"),
        showGdsVersion = true
    )
}

@mainTemplate(
    title = messages("tai.incomes.warning.customGaTitle"),
    authedUser = Some(user),
    backLinkContent = Some(Messages("tai.back-link.upper")),
    backLinkId = "backLink"
    ) {

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">

            @if(duplicateSubmissionWarningForm.errors.nonEmpty){
                @govukErrorSummary(ErrorSummary(errorList = duplicateSubmissionWarningForm.errors.asTextErrorLinks, title = Text(messages("tai.income.error.form.summary"))))
            }

            @header
    @form(action = controllers.income.estimatedPay.update.routes.IncomeUpdateCalculatorController.submitDuplicateSubmissionWarning) {
    <div class="form-group">

        <p class="govuk-body">@viewModel.paragraphOne</p>
        <p class="govuk-body">@messages("tai.incomes.warning.text2")</p>
        <div class="govuk-details__text govuk-!-margin-bottom-4  ">
            <p class="govuk-body">@messages("tai.incomes.warning.text3")</p>
        </div>

        @govukRadios(Radios(
            fieldset = Some(Fieldset(
                legend = Some(Legend(
                    content = Text(messages("tai.employment.warning.legend")),
                    classes = "govuk-fieldset__legend--l",
                    isPageHeading = true
                ))
            )),
            idPrefix = Some(YesNoForm.YesNoChoice),
            name = YesNoForm.YesNoChoice,
            errorMessage = duplicateSubmissionWarningForm.errors.asTextErrorMessages.headOption,
            items = Seq(
                RadioItem(
                    id = Some(YesNoForm.YesNoChoice + "-yes"),
                    content = Text(viewModel.optionOne),
                    value = Some(YesNoForm.YesValue),
                    attributes = Map("data-journey-val" -> "Yes"),
                ),
                RadioItem(
                    id = Some(YesNoForm.YesNoChoice + "-no"),
                    content = Text(viewModel.optionTwo),
                    value = Some(viewModel.optionTwo),
                    attributes = Map("data-journey-val" -> "No"),
                ),
            )
        ))



    </div>

    @govukButton(Button(content = Text(messages("tai.submit"))))

    @cancelLink(routes.IncomeSourceSummaryController.onPageLoad(empId))


    </div>

    </div>


}


}